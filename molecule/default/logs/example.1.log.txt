ssato@x1-carbon-gen6% cat ../junos_env.sh                                                    ~/repos/public/github.com/ssato/ansible-role-nw-backup-config.git
export JUNIPER_USER=********
export JUNIPER_PASS='*********'
export JUNIPER_HOST=66.12x.xxx.xxx
export JUNIPER_PORT=3xxxxx
ssato@x1-carbon-gen6% source ../junos_env.sh                                                 ~/repos/public/github.com/ssato/ansible-role-nw-backup-config.git
ssato@x1-carbon-gen6% molecule test                                                          ~/repos/public/github.com/ssato/ansible-role-nw-backup-config.git
--> Validating schema /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/localhost/molecule.yml.
Validation completed successfully.
--> Validating schema /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/molecule.yml.
Validation completed successfully.
--> Test matrix

└── default
    ├── dependency
    ├── lint
    ├── cleanup
    ├── destroy
    ├── syntax
    ├── create
    ├── prepare
    ├── converge
    ├── idempotence
    ├── side_effect
    ├── verify
    ├── cleanup
    └── destroy

--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/hosts linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/hosts
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/group_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/group_vars
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/host_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/host_vars
--> Scenario: 'default'
--> Action: 'dependency'
Skipping, missing the requirements file.
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/hosts linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/hosts
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/group_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/group_vars
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/host_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/host_vars
--> Scenario: 'default'
--> Action: 'lint'
--> Executing Yamllint on files found in /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/...
Lint completed successfully.
--> Executing Ansible Lint on /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/verify.yml...
Lint completed successfully.
--> Executing Ansible Lint on /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/playbook.yml...
Lint completed successfully.
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/hosts linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/hosts
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/group_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/group_vars
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/host_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/host_vars
--> Scenario: 'default'
--> Action: 'cleanup'
Skipping, cleanup playbook not configured.
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/hosts linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/hosts
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/group_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/group_vars
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/host_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/host_vars
--> Scenario: 'default'
--> Action: 'destroy'

    PLAY [Destroy] *****************************************************************

    PLAY RECAP *********************************************************************

--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/hosts linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/hosts
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/group_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/group_vars
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/host_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/host_vars
--> Scenario: 'default'
--> Action: 'syntax'

    playbook: /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/playbook.yml
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/hosts linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/hosts
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/group_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/group_vars
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/host_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/host_vars
--> Scenario: 'default'
--> Action: 'create'

    PLAY [Create] ******************************************************************

    TASK [Make up ssh-keyscan command strings] *************************************
    ok: [vmx01]

    TASK [Ensure all hosts found in ~/.ssh/known_hosts] ****************************
# 66.12x.xxx.xxx:3xxxx SSH-2.0-OpenSSH_7.2
# 66.12x.xxx.xxx:3xxxx SSH-2.0-OpenSSH_7.2
# 66.12x.xxx.xxx:3xxxx SSH-2.0-OpenSSH_7.2
[WARNING]: Platform linux on host vmx01 is using the discovered Python
interpreter at /usr/bin/python, but future installation of another Python
interpreter could change this. See https://docs.ansible.com/ansible/2.9/referen
ce_appendices/interpreter_discovery.html for more information.

    ok: [vmx01]

    PLAY RECAP *********************************************************************
    vmx01                      : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/hosts linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/hosts
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/group_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/group_vars
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/host_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/host_vars
--> Scenario: 'default'
--> Action: 'prepare'
Skipping, prepare playbook not configured.
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/hosts linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/hosts
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/group_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/group_vars
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/host_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/host_vars
--> Scenario: 'default'
--> Action: 'converge'

    PLAY [Converge] ****************************************************************

    TASK [ssato.nw_backup_config : include_tasks] **********************************
    included: /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/tasks/pre.yml for vmx01

    TASK [ssato.nw_backup_config : Test variables are OK] **************************
    ok: [vmx01] => {
        "changed": false,
        "msg": "All assertions passed"
    }

    TASK [ssato.nw_backup_config : Ensure backup dir exists] ***********************
[WARNING]: Platform linux on host vmx01 is using the discovered Python
interpreter at /usr/bin/python, but future installation of another Python
interpreter could change this. See https://docs.ansible.com/ansible/2.9/referen
ce_appendices/interpreter_discovery.html for more information.

    ok: [vmx01]

    TASK [ssato.nw_backup_config : Set the backup file path] ***********************
    ok: [vmx01]

    TASK [ssato.nw_backup_config : include_tasks] **********************************

    TASK [ssato.nw_backup_config : include_tasks] **********************************
    included: /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/tasks/junos_backup_config.yml for vmx01

    TASK [ssato.nw_backup_config : Backup config on the node] **********************
    ok: [vmx01]

    TASK [ssato.nw_backup_config : include_tasks] **********************************
    skipping: [vmx01]

    TASK [ssato.nw_backup_config : include_tasks] **********************************

    PLAY RECAP *********************************************************************
    vmx01                      : ok=6    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0

--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/hosts linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/hosts
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/group_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/group_vars
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/host_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/host_vars
--> Scenario: 'default'
--> Action: 'idempotence'
Idempotence completed successfully.
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/hosts linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/hosts
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/group_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/group_vars
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/host_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/host_vars
--> Scenario: 'default'
--> Action: 'side_effect'
Skipping, side effect playbook not configured.
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/hosts linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/hosts
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/group_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/group_vars
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/host_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/host_vars
--> Scenario: 'default'
--> Action: 'verify'
--> Running Ansible Verifier

    PLAY [Verify] ******************************************************************

    TASK [Test if config backup file exists] ***************************************
[WARNING]: Platform linux on host vmx01 is using the discovered Python
interpreter at /usr/bin/python, but future installation of another Python
interpreter could change this. See https://docs.ansible.com/ansible/2.9/referen
ce_appendices/interpreter_discovery.html for more information.

    ok: [vmx01]

    PLAY RECAP *********************************************************************
    vmx01                      : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

Verifier completed successfully.
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/hosts linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/hosts
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/group_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/group_vars
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/host_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/host_vars
--> Scenario: 'default'
--> Action: 'cleanup'
Skipping, cleanup playbook not configured.
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/hosts linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/hosts
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/group_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/group_vars
--> Inventory /home/ssato/repos/public/github.com/ssato/ansible-role-nw-backup-config.git/molecule/default/../../tests/inventory/juniper_vlabs/host_vars linked to /home/ssato/.cache/molecule/ansible-role-nw-backup-config.git/default/inventory/host_vars
--> Scenario: 'default'
--> Action: 'destroy'

    PLAY [Destroy] *****************************************************************

    PLAY RECAP *********************************************************************

--> Pruning extra files from scenario ephemeral directory
ssato@x1-carbon-gen6% grep 'set version' /tmp/nbc/juniper/vmx01.out                          ~/repos/public/github.com/ssato/ansible-role-nw-backup-config.git
set version 1*.3R*.*
ssato@x1-carbon-gen6%                                                                        ~/repos/public/github.com/ssato/ansible-role-nw-backup-config.git
